# 基于APF & 条件判断Defence的无人机PID控制

###### 水很多（划掉）

### 本仓库结合个人在暑期参加的比赛代码，进行改编和总结，主要包括两个内容 : 

1.人工势场法用以实现对于敌方飞机的追击和避障，同时对于战场中心存在的我方飞机禁飞区采用“行星带法”进行躲避，当我方飞机距离禁飞区过近时，将舍弃人工势场法，而使用固定圆周轨道控制飞行，使飞机能够有充足的空间在不进入禁飞区的情境下完成防御动作。

2.通过跃升、俯冲、急转弯、蛇形机动等的PID动作控制，实现躲避敌方攻击，对于不同的被攻击情况进行了人工分类，从而能够对于绝大多数情况采取的效果良好的防御动作

### 注意：
本项目源文件因为参加比赛，故本仓库中代码仅展示框架和思路，删除了部分参数和细节判断。

-----------
### 文件介绍

$KU18$为自己创建的函数库，包含一些基础动作函数，根据敌机相对位置计算敌机实际位置，弧度角度转换等，也是$defensexample$ 和 $APFexample$ 的库

$defensexample$ 根据攻击方向和敌机位置做出躲避机动动作，实现躲避机动。

$APF_example$ 利用人工势场法，将敌方飞机作为引力，战场边界和禁飞区的几何外壁作为斥力，实现追击敌机效果并使我方飞机始终保持在战场内并避免进入禁飞区。

------------

### 人工势场法
1986年，Khatib首先提出人工势场法，并将其应用在机器人避障领域。其基本思想是在障碍物周围构建障碍物斥力势场，在目标点周围构建引力势场，被控对象在这两种势场组成的复合场中受到斥力作用和引力作用，斥力和引力的合力指引着被控对象的运动，搜索无碰的避障路径。用比喻的说法，人工势场法是将障碍物比作是平原上具有高势能值的山峰，而目标点则是具有低势能值的低谷。

公式为：

斥力：
$U_{rep}(r)=\frac{1}{2} K_{rep}（\frac{1}{r}-\frac{1}{R})^2$

引力：
$$U_{att}(r)=\frac{1}{2} K_(att) r^2$$

注：本代码并未按照平方反比编程


